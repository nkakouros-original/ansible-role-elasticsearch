---

- name: Import index templates
  uri:
    url: "{{ elastic_node_address }}/_template/{{ item.index }}"
    method: PUT
    body: "{{ lookup('file', item.file) | from_json }}"
    body_format: json
    headers:
      Content-Type: application/json
    force_basic_auth:
      "{{ _elastic_elastic_user is defined | ternary(true, false) }}"
    url_username: "{{ _elastic_elastic_user['name'] | default(omit) }}"
    url_password: "{{ _elastic_elastic_user['password'] | default(omit) }}"
    validate_certs: false
    return_content: true
  loop: "{{ elastic_indexes_to_import }}"
