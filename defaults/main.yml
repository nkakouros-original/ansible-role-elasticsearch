---

elastic_enabled: true
# Set to false to completely disable the role

# Installation{{{
elastic_major_version: '7'
# The major version of elastic search to track. This will be used to add the
# relevant repository and install the latest release for that version.

elastic_user: root
# The user that will own elasticsearch files. Elasticsearch will be run as the
# `elasticsearch` user as defined in the systemd service file that comes with
# the elasticsearch installation, regardless of this setting. If you want to
# change that user as well, you can use the `elastic_systemd_override` variable
# to change the user that systemd will use to run elasticsearch.

elastic_group: elasticsearch
# The group that `elasticsearch_user` will be added to. If the `kibana_user` is
# `root`, the `root` user will not be added to this group. By default, when
# installing elasticsearch, the configuration files are owned by user `root` and
# group `elasticsearch`. The default behavior of the role is to replicate this,
# while giving the option to the user to run elasticsearch as an arbitrary
# user/group if they need to.
# }}}
# Security{{{
elastic_builtin_users_set_random_passwords: true
# Set to true to set random passwords for the built-in users

elastic_builtin_users_password_backup_file: ~
# Set to a path on the ansible controller where the new passwords for the
# builtin users will be saved in. The records will be in a `{"name": user,
# password: pass}` format and can be loaded into an ansible variable with the
# `file` lookup plugin. If you leave this variable None, the new passwords will
# be only printed during provisioning and you will have no way of finding them
# afterwards.
# }}}
# Certificates {{{
# You can use the variables in this section to generate certificates and
# upload them to elasticsearch nodes. These can then be used in
# `elastic_config` to setup TLS for the transport or http layer of
# elasticsearch.

elastic_certificates_generate: true
# Whether to generate certificates for encrypted communication. If you enable
# security (`xpack.security.enabled`), you must also configure encrypted
# communications and user either your own certificates or use this variable to
# have the role generate certificates for you. Of course, if you choose to have
# the role generate certificates, you should do that on one of the nodes and
# then distribute the generated certificates to the other nodes in the cluster.
# The role can help you with that by allowing you to download the generated
# certificates. The command to generate the certificates can be found in
# `vars/main.yml` and it generates separate (PKCS#1) PEM encoded keys and
# certificates instead of a single PKCS#12 files that contain both the CA,
# certificate and private key of a host in a single file. The certificates
# generated by the role can be used on other elastic nodes and with the elastic
# beats. If you also want to use them with Logstash, you should refer to the
# documentation of the input/output plugin that you want to setup ssl for. Some
# plugins, such as the beats input plugin, expect different encodings for the
# certificates/files and you may need to convert them. For example, the beats
# input expect the private key in PKCS#8 format instead of PKCS#1. The
# `nkakouros.logstash` role provides some facilities to handle these
# conversions.

elastic_certificates_generate_csr: false
# Whether to generate certificate signing requests instead of ready-to-use
# certificates together with their CA.

elastic_certificates_password: ~
# The password to use to protect the generated private keys. Leave empty to set
# the empty string as the password. Certificates do need to have a password even
# if it is blank.

elastic_certificates_password_renew: false
# When uploading a certificate to a node, its password will be stored to the
# elasticsearch keystore on that node. If you change the
# `elastic_certificates_password` eg when renewing certificates, then the old
# password stored on a node's keystore will cause failures. Thus, if you are
# updating the certificate password, set this variable to true to update the
# node's keystore as well. The default here is false to support idempotency.

elastic_certificates_renew: false
# Set this to true to delete any existing, already generated certificates and
# CA. This is meant as simple way to "renew" certificates after expiration.

elastic_certificates_config: ~
# A yaml array to be used to generate the certificates. For more information,
# see
# www.elastic.co/guide/en/elasticsearch/reference/current/certutil.html#certutil-silent.
# Example:
# elastic_certificates_config: |
#   instances:
#     - name: "node1"
#       ip:
#         - "192.0.2.1"
#       dns:
#         - "node1.mydomain.com"

elastic_certificates_download: true
# Whether to download the zip file containing the generated certificates. This
# is useful if you want to use the certificates on other nodes.

elastic_certificates_download_dir: ''
# Where to download the zip containing the certificates on the ansible
# controller.

elastic_certificates_download_extract: true
# Whether to extract the zip containing the certificates when downloaded on
# the ansible controller.

elastic_certificates: ~
# Use this variable to point to a certificate file on the ansible controller
# that should be uploaded to the elasticsearch node and be used as the
# certificate for that node. Eg:
# elastic_certificates:
#   ca: path/to/ca.cert
#   cert: path/to/node/cert
#   key: path/to/node/key

elastic_certificates_dir: /etc/elasticsearch/certs/
# The folder where `elastic_certificates` will be uploaded into.
# }}}
# Configuration {{{
elastic_jvm_min_heap_size: 1g
elastic_jvm_max_heap_size: 1g
# Set the minimum and maximum JVM heap size in jvm.options

elastic_jvm_extra_config: ~
# Use this to append extra configuration directives in the jvm.options file.
# These directives will override any previous ones in the jvm.options file. Eg:
# elastic_jvm_extra_config: |
#   -Des.networkaddress.cache.negative.ttl=10
#

elastic_systemd_override: ~
# Use this to override system settings using a systemd override. Eg:
# elastic_systemd_override: |
#   [Service]
#   LimitMEMLOCK=infinity

elastic_config: {}
# Elastic configuration in the form of a yaml array with non-collapsed keys.
# This will be merged with a default configuration shipped with this role. The
# variables below are used by the default configuration and you don't need to
# set them again. You could include that info directly in `elastic_config` and
# ignore these variables below. The `elastic_config` array will be output as is
# into the `/etc/elasticsearch/elasticsearch.yml` file. The default
# configuration can be found in the `vars/main.yml` file of this role. For what
# these settings do, consult the elastic search documentation.

elastic_bind_host: localhost
# The address where elastic will listen on for requests to its JSON api.

elastic_bind_port: 9200
# The port where elastic will listen on for request to its JSON api.

elastic_transport_host: "{{ elastic_bind_host }}"
# The address elastic search will use to communicate with other nodes in the
# cluster.

elastic_transport_port: 9300
# The port that elastic search will use to communicate with other nodes.

elastic_cluster_name: elasticsearch
# The name of the cluster the node will belong to.

elastic_cluster_initial_master_nodes:
  - "{{ elastic_node_name }}"

elastic_node_name: "{{ inventory_hostname }}"
# The name of the node

elastic_master_node: true
elastic_data_node: true
elastic_ingest_node: true
# Whether the provisioned node will be act as a master and/or data and/or ingest
# node.
# }}}
# Others {{{
elastic_indexes_to_import: []
# This is a list of files that contain index templates that should be imported
# into elasticsearch. This is useful in cases you need to load an
# auditbeat/packetbeat/etc index template manually because the beat installation
# does not have direct access to elasticsearch. The format should be:
# elastic_indexes_to_import:
#   - file: /path/to/json/template/file
#     index: the-name-of-the-index-where-the-template-will-be-imported
# }}}
