---

# Elasticsearch configuration defaults
_elastic_certificates_ca_command: >-
  /usr/share/elasticsearch/bin/elasticsearch-certutil
    ca
    --silent
    --pem
    --out /etc/elasticsearch/certs/elastic-stack-ca.zip
    {{ '--pass ' + elastic_certificates_password
        if elastic_certificates_password != None else '' }}

_elastic_certificates_cert_command: >-
  /usr/share/elasticsearch/bin/elasticsearch-certutil
    {{ elastic_certificates_generate_csr | ternary('csr', 'cert') }}
    --silent
    --pem
    --in /etc/elasticsearch/certs/elasticsearch-certutil.yml
    --out /etc/elasticsearch/certs/elasticsearch-certs.zip
    --ca-cert /etc/elasticsearch/certs/ca/ca.crt
    --ca-key /etc/elasticsearch/certs/ca/ca.key
    {{ '--ca-pass ' + elastic_certificates_password
        if elastic_certificates_password != None else '' }}
    {{ '--pass ' + elastic_certificates_password
        if elastic_certificates_password != None else '' }}
